# ConcaTTS

trivial concatenative on-premise text to speech.

A simple on-premise concatenative TTS library, exposed as a nodejs package / function.
The speech is produced by concatenating audio files sources for letters, words, entire phrases. 

## Step 1: OFF-LINE DATA PREPARATION: SPEECH FILES DATA BASE

Following a configuration, all audio files required must be produced, with a recording or a download.
Audio source files could be made in two different ways:

1. Human-made: prerecorded audio files, result of a voice actor recordings
2. Synthetic voices files, generated by any cloud-based TTS and downloaded as files. 
   E.g. for free: https://github.com/zlargon/google-tts 

The requirement is to have input texts configured as characters, words, phrases:

- List of ready done (static) phrases 
 
  Example:
  ```
  Looks like her company has three containers set to sail for tonight.
  ```

- List of ready done letters/symbols for spoken spelling of unknown words or aplhanumeric codes:
 
  Examples (alphanumeric codes):
  ```
  RAIU 690011 4 25 U1
  CSQU3054383
  ```
  BTW, above codes are container codes with format ISO6346 (see: https://github.com/solyarisoftware/iso6346).
  In this case the required spoken spelling is the concatenation of letter-by-letter speech:

  text: `CSQU3054383`, text to speech: `C S Q U 3 0 5 4 3 8 3`

 
- Static phrases containing also entities to be resolved at run-time
 
  Example:
  ```
  Container JL1349-76 has been cleared for pick-up.
  ```
  in the example the entity is a container code as a `{alphanumeric_code}`:
  ```
  Container {alphanumeric_code} has been cleared for pick-up.
  ```

- Phrases built concatenating words and or letters (that's the general case).


## Step 2: RUN-TIME ENVIRONMENT

The target environment is any sort of embedded system, with scarse CPU resources, but a "real-time" responsive speech output.

### API functions

Output as: 
  - an audio file, lossless (e.g. `wav`) or in a compressed  lossy compression format (e.g. [`ogg`](https://en.wikipedia.org/wiki/Opus_(audio_format)))
  - a memory buffer in ain above specified format
 
```javascript
/**
 * concatts 
 *
 * @param {String} text
 * @param {String} format (wav/ogg/etc.)
 * @return {String} filename
 *
 * or
 * @return {buffer}  
 */
```

Example:
```javascript
const buffer = concatts('Container JL1349-76 has been cleared for pick-up.', 'ogg')
```

### Caching

To speedup performances, a caching could improve elapsed times. 

---
